(function(u,r){var x=function(){};x.create=function(a){var b=u("<div/>").attr({id:a,"class":"modal hide"});return b};x.ensure=function(a){var b=u("#"+a);if(b.length==0){b=x.create(a).appendTo("body")}return b};x.prototype={loading:function(){this.$el.modal("loading")},load:function(b){var a=this;this.$el.modal();this.loading();u.get(b,function(c){a.$el.html(c).modal("layout");a.loading();a.$el.find('[rel="tooltip"]').tooltip({container:a.$el});a.remoteUrl=b;a.$el.trigger("loaded")})},refresh:function(){if(!this.remoteUrl){return}this.load(this.remoteUrl)},alert:function(b,c){c=c||"success";this.$el.find(".alert").remove();var a=u('<div class="alert"><button type="button" class="close" data-dismiss="alert">&times;</button></div>');a.addClass("alert-"+c).append(b).prependTo(this.$el.find(".modal-body"))}};var s=function(b){var a=this;this.$el=b;this.$el.on("submit.video.goanimate",".video-license-form",function(c){var d=u(this);c.preventDefault();a.publish(d.serialize())}).on("click",'[data-action="buttonControl"]',function(c){var d=u(this);var e=true;if(d.data("show")=="#transfer_rights_form"){}else{if(d.data("hide")=="#transfer_rights_form"&&d.data("show")!="#movie_license_enterance"){if(a.validateAddressForm()==true){a.setLicense(u("#movie-license-form").serialize())}else{e=false}a.previewLicense()}else{if(d.data("show")=="#payment_info"){a.showPaymentOverlay(d.data("frame-src"))}}}if(e==true){a.buttonControl(d.data("hide"),d.data("show"))}c.preventDefault()}).on("loaded",function(){a.resetState()})};s.sCountryWithoutZipCodeString="Afghanistan|Angola|Antigua and Barbuda|Aruba|Bahamas|Belize|Benin|Bhutan|Botswana|Burkina Faso|Burundi|Cameroon|Central African Republic|Comoros|Congo|Congo, The Democratic Republic of|Cook Islands|Cï¿½te d'Ivoire|Djibouti|Dominica|Equatorial Guinea|Eritrea|Fiji|Gambia|Gibraltar|Grenada|Guinea|Guyana|Hong Kong|Iceland|Kiribati|Korea, Democratic People's Republic of|Macao|Malawi|Mali|Mauritania|Mauritius|Montserrat|Namibia|Nauru|Netherlands Antilles|Niue|Panama|Qatar|Rwanda|Saint Kitts and Nevis|Saint Lucia|Saint Vincent and The Grenadines|Seychelles|Sierra Leone|Solomon Islands|Somalia|Suriname|Tanzania, United Republic of|Tokelau|Tonga|Trinidad and Tobago|Tuvalu|Uganda|United Arab Emirates|Vanuatu|Yemen|Zimbabwe";s.aCountryWithoutZipCode=s.sCountryWithoutZipCodeString.split("|");s.sCanadaStatesString="Alberta|British Columbia|Manitoba|New Brunswick|Newfoundland|Northwest Territories|Nova Scotia|Nunavut|Ontario|Prince Edward Island|Quebec|Saskatchewan|Yukon Territory";s.aCanadaStates=s.sCanadaStatesString.split("|");s.sCanadaStatesCodeString="AB|BC|MB|NB|NL|NT|NS|NU|ON|PE|QC|SK|YT";s.aCanadaStatesCode=s.sCanadaStatesCodeString.split("|");s.sUSAStatesString="Alabama|Alaska|Arizona|Arkansas|California|Colorado|Connecticut|Delaware|District of Columbia|Florida|Georgia|Hawaii|Idaho|Illinois|Indiana|Iowa|Kansas|Kentucky|Louisiana|Maine|Maryland|Massachusetts|Michigan|Minnesota|Mississippi|Missouri|Montana|Nebraska|Nevada|New Hampshire|New Jersey|New Mexico|New York|North Carolina|North Dakota|Ohio|Oklahoma|Oregon|Pennsylvania|Rhode Island|South Carolina|South Dakota|Tennessee|Texas|Utah|Vermont|Virginia|Washington|West Virginia|Wisconsin|Wyoming|Armed Forces Americas|Armed Forces|Armed Forces Pacific";s.aUSAStates=s.sUSAStatesString.split("|");s.sUSAStatesCodeString="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY|AA|AE|AP";s.aUSAStatesCode=s.sUSAStatesCodeString.split("|");s.prototype=u.extend({},x.prototype,{setLicense:function(a){var b=this;this.loading();u.post("/ajax/manageMovieOwner/set",a,function(d){b.loading();if(d.error){b.alert(d.error,"error")}else{formDataArray=a.split("&");for(var c=0;c<formDataArray.length;c++){pair=formDataArray[c].split("=");replace_value=decodeURIComponent(pair[1]);b.$el.find(".u_"+pair[0]).html(replace_value.replace("+"," "))}}},"json")},getLicense:function(){var a=this;this.loading();u.post("/ajax/manageMovieOwner/get",formData,function(b){a.loading();if(b.error){a.alert(b.error,"error")}else{alert(b)}},"json")},buttonControl:function(a,b){this.$el.find(a).hide();this.$el.find(b).show();if(b=="#ending"||b=="#failure"){this.$el.find(".movie_license_header").hide()}else{this.$el.find(".movie_license_header").show()}this.$el.modal("layout")},resetState:function(){var b=this;var a=this.$el.find("#cboCountry :selected").val();var c=this.$el.find("#user_state").val();if(a=="US"){this.$el.find("#input-state").hide();this.$el.find("#input-state").val("");this.$el.find("#cboState").show();b.updateOptions(this.$el.find("#cboState"),s.aUSAStates,s.aUSAStatesCode);this.$el.find("#cboState").val(c)}else{if(a=="CA"){this.$el.find("#input-state").hide();this.$el.find("#input-state").val("");this.$el.find("#cboState").show();b.updateOptions(this.$el.find("#cboState"),s.aCanadaStates,s.aCanadaStatesCode);this.$el.find("#cboState").val(c)}else{this.$el.find("#input-state").show();this.$el.find("#cboState").hide()}}b.updateZip()},toggleCompanyInput:function(){var a=this;var b=this.$el.find('[name="license_type"]:checked').val();if(b=="individual"){this.$el.find("#company_input").hide();this.$el.find('[name="company_name"]').val("")}else{if(b=="company"){this.$el.find("#company_input").show()}}},updateOptions:function(b,c,d){if(b.prop){var a=b.prop("options")}else{var a=b.attr("options")}u("option",b).remove();u.each(c,function(f,e){a[a.length]=new Option(e,d[f])})},updateZip:function(){var a=this;if(a.containsNoZip(this.$el.find("#cboCountry :selected").text())){this.$el.find("#fld_cczipcode").hide();this.$el.find("#cczipcode").val("00000")}else{if(this.$el.find("#cczipcode").val()=="00000"){this.$el.find("#cczipcode").val("")}this.$el.find("#fld_cczipcode").show()}},containsNoZip:function(a){for(var b=0;b<s.aCountryWithoutZipCode.length;b++){if(s.aCountryWithoutZipCode[b]===a){return true}}return false},validateAddressForm:function(){this.$el.find(".form-error").html("");var a=[];var e=this.$el.find('[name="company_name"]').val();var b=this.$el.find('[name="contact_person"]').val();var c=this.$el.find('[name="license_type"]:checked').val();var d=this.$el.find('[name="email"]').val();if(c=="company"){if(e==""){a.push({id:"fld_company_name",msg:GT.gettext("Please input your company name")})}}if(b==""){a.push({id:"fld_contact_person",msg:GT.gettext("Please input the name of your contact person")})}if(d!=""){if(!d.match(/^([\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+\.)*[\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+@((((([a-z0-9]{1}[a-z0-9\-]{0,62}[a-z0-9]{1})|[a-z])\.)+[a-z]{2,6})|(\d{1,3}\.){3}\d{1,3}(\:\d{1,5})?)$/i)){a.push({id:"fld_email",msg:GT.gettext("Invalid email")})}}for(i=0;i<a.length;i++){content=(a[i].msg);this.$el.find("#"+a[i].id).html(content)}if(a.length>0){return false}else{return true}},previewLicense:function(){var b=this.$el.find('[name="company_name"]').val();var a=this.$el.find('[name="contact_person"]').val();if(b!=""){this.$el.find(".b_contact").html(b)}else{this.$el.find(".b_contact").html(a)}},showPaymentOverlay:function(c){var b=this.$el.find("#payment_info");var a=jQuery("<iframe></iframe>",{id:"cc-payment-iframe",scrolling:"no",allowTransparency:"true",frameborder:"0",width:634,height:647,src:c});this.$el.find(b).html(a)}});var t=function(b){var a=this;this.$el=b;this.$el.on("submit.video.goanimate",".video-publish-form",function(c){var d=u(this);c.preventDefault();a.publish(d.serialize())})};t.prototype=u.extend({},x.prototype,{publish:function(a){var b=this;this.loading();u.post("/ajax/saveMovieSettings",a,function(c){b.loading();if(c.error){b.alert(c.error,"error")}else{b.refresh();b.$el.trigger(u.Event("published"),[c.video])}},"json")}});var y=function(a){this.$el=a};y.prototype=u.extend({},x.prototype,{});var n=function(c,b){var a=this;this.$el=c;this.options=b;this.$el.on("click.video.goanimate","[data-video-export]",function(d){var e=u(this);d.preventDefault();if(e.data("videoExport")=="youtube"){a.popWindow(e.attr("href"))}else{a.requestExport(e.attr("href"))}}).on("exportError",function(d,e){a.alert(e.error,"error")}).on("exportSuccess",function(d,e){a.requestSuccess(e)}).on("wistiaConnectError",function(d,e){a.alert(e.error,"error")}).on("wistiaConnectSuccess",function(d,e){a.wistiaConnectSuccess(e)}).on("click.video.goanimate",'[data-action="wistia-connect"]',function(d){var e=u(this);d.preventDefault();a.popWindow(e.data("url"))}).on("click.video.goanimate",'[data-action="wistia-reset"]',function(d){var e=u(this);d.preventDefault();u.get("/wistiaReset",function(f){a.$el.find(".modal-body").removeClass("authorized").find(".wistia-account-name").empty();a.$el.modal("layout")})}).on("change.video.goanimate keyup.video.goanimate",'[data-action="wevideo-auth"] input[name="email"]',function(d){if(!a.$el.find(".wevideo-export-authorize-action span:visible").hasClass("wevideo-export-authorize-button")){a.$el.find(".wevideo-export-authorize-action").find("span").hide().end().find(".wevideo-export-authorize-button").show()}}).on("submit.video.goanimate",'[data-action="wevideo-auth"]',function(d){var e=u(this);d.preventDefault();e.find(".wevideo-export-authorize-action").find("span").hide().end().find(".wevideo-export-authorize-loading").show();jQuery.ajax({type:"POST",url:e.attr("action"),data:e.serialize(),success:function(f){if(f.suc){e.parents(".modal-body").find(".pick-resolution .wevideo_email").text(e.find('input[name="email"]').val());e.find(".wevideo-export-authorize-action").find("span").hide().end().find(".wevideo-export-authorize-message-success").show();a.$el.find('[data-action="wevideo-proceed-export"]').prop("disabled",false)}else{e.find(".wevideo-export-authorize-action").find("span").hide().end().find(".wevideo-export-authorize-message-fail").show()}},error:function(){a.alert(GT.gettext("Error contacting the server"),"error")},dataType:"json"})}).on("click.video.goanimate",'[data-action="wevideo-proceed-export"]',function(d){a.$el.find(".modal-body").addClass("authorized").end().find('.modal-footer [data-action="wevideo-proceed-export"]').hide().end().modal("layout")}).on("click.video.goanimate",'[data-action="wevideo-reset"]',function(d){var e=u(this);d.preventDefault();u.get("/ajax/wevideo/logout",function(f){a.$el.find(".modal-body").removeClass("authorized").end().find('.modal-footer [data-action="wevideo-proceed-export"]').prop("disabled",true).show().end().modal("layout")})})};n.prototype=u.extend({},x.prototype,{popWindow:function(a){r.open(a,"_go_video_export","toolbar=no,status=no,height=650,width=960")},requestExport:function(b){var a=this;u.get(b,function(c){if(c.error){a.alert(c.error,"error");return}a.requestSuccess(c)},"json")},requestSuccess:function(a){if(a.resolution){this.$el.find("."+a.resolution+" .video-export-action").html('<span class="btn btn-large btn-dark">'+GT.gettext("Processing")+"...</span>");switch(a.type){case"youtube":this.alert(GT.gettext("Your video is being converted and will be exported to YouTube. You can close this window."));break;case"lectora":this.alert(GT.gettext("You video will be visible on Lectora after it has been converted. You can close this window."));break;case"viewbix":this.alert(GT.gettext("Your video is being converted. When the conversion is successful we will email you a URL you can use to create your Viewbix"));break;case"wevideo":this.alert(GT.gettext("You will receive an email once your video has been exported to WeVideo. You can close this window."));break;case"wistia":this.alert(GT.gettext("You will receive an email once your video has been exported to Wistia. You can close this window."));break;default:this.alert(GT.gettext("You will receive an email once your video is ready for download. You can close this window."))}}},wistiaConnectSuccess:function(a){this.$el.find(".modal-body").addClass("authorized").find(".wistia-account-name").text(a.account_name);this.$el.modal("layout")}});r.videoExportError=function(a){u("#video-export").trigger("exportError",[a])};r.videoExportStarted=function(a){u("#video-export").trigger("exportSuccess",[a])};r.wistiaConnectError=function(a){u("#video-export").trigger("wistiaConnectError",[a])};r.wistiaConnectSuccess=function(a){u("#video-export").trigger("wistiaConnectSuccess",[a])};var w=function(c,b){var a=this;this.$el=c;this.options=b;this.$el.on("submit.video.goanimate",".video-settings-form",function(d){var e=u(this);d.preventDefault();a.post(e.serialize())})};w.prototype=u.extend({},x.prototype,{post:function(a){var b=this;b.loading();u.post("/ajax/saveMovieSettings",a,function(d){var c=u.Event("saved");b.loading();if(d.error){b.alert(d.error,"error")}else{b.$el.modal("hide");showNotice(GT.gettext("Video settings updated"));b.$el.trigger(c,[d.video])}},"json")}});var q={doDelete:function(a){if(!confirm(GT.gettext("Are you sure you want to delete this video?"))){return}u.post("/ajax/deleteMovie/"+a,function(b){parseResponse(b);if(responseArray.code=="0"){u("#video-"+a).find('[rel="tooltip"]').tooltip("destroy");u("#video-"+a).fadeOut(300,function(){u(this).remove()});u(document).trigger("videoDeleted")}else{showNotice(responseArray.json.error,true)}resetResponse()})},doUnDelete:function(a){u.post("/ajax/undeleteMovie/"+a,function(b){parseResponse(b);if(responseArray.code=="0"){u("#video-"+a).find('[rel="tooltip"]').tooltip("destroy");u("#video-"+a).fadeOut(300,function(){u(this).remove()});u(document).trigger("videoRestored")}else{showNotice(responseArray.json.error,true)}resetResponse()})}};var o=function(b){var a=this;this.$el=b;this.$el.on("submit.folder.goanimate",".folder-create-form",function(c){var d=u(this);var e=null;c.preventDefault();a.postCreate(d.serialize(),d)});this.$el.on("click.folder.goanimate",".folder-create-another a",function(c){var d=u(this);c.preventDefault();u.tmpl("folder_create_tmpl").appendTo(a.$el.find(".folder-create-forms"));a.$el.find(".folder-create-another").hide()});this.$el.on("click.folder.goanimate",".folder-create-form .btn-delete-folder.active",function(c){var d=u(this);c.preventDefault();a.postDelete({folder_id:d.attr("data-enc-fid")},d)})};o.prototype=u.extend({},x.prototype,{postCreate:function(a,c){var b=this;c.find(".btn-create-folder").find("button").children("span").hide().end().find(".msg-loading").show().end().attr("disabled",true);u.post("/ajax/addMovieFolder",a,function(g){c.find(".btn-create-folder").find("button").children("span").hide().end().find(".msg-default").show().end().attr("disabled",false);var e=g.substr(0,1);var f=jQuery.parseJSON(g.substr(1));if(1==e){b.alert(f.error,"error")}else{myVideos.updateFolderList();c.find(".btn-create-folder").find("button").children("span").hide().end().find(".msg-created").show().end().attr("disabled",true);c.find(".btn-delete-folder").removeClass("invisible").attr("data-enc-fid",f.enc_fid);c.find("input[name=enc_fid]").val(f.enc_fid);b.$el.find(".folder-create-another").show();b.$el.find(".modal-footer").addClass("modal-footer-collapse-open");var h=c.find("input[name=from_assign]").val();if(u("#video-assign-folder")&&(h==1)){var d=u("<option></option>");d.val(f.enc_fid);d.text(f.name);d.attr("selected",true);u("#video-assign-folder").find(".folder-assign-form select[name=folder_id]").prepend(d)}}},"text")},postDelete:function(b,a){var c=this;a.find(".icon-default").hide().end().find(".icon-loading").show();u.post("/ajax/deleteMovieFolder",b,function(f){a.find(".icon-loading").hide().end().find(".icon-default").show();var d=f.substr(0,1);var e=jQuery.parseJSON(f.substr(1));if(1==d){c.alert(e.error,"error")}else{a.siblings(".btn-create-folder").find("button").children("span").hide().end().find(".msg-deleted").show();a.addClass("invisible");var h=a.attr("data-enc-fid");u("#videos-folders-nav").find('li[data-folder-id="'+h+'"]').remove();var g=a.parents("form.folder-create-form").find("input[name=from_assign]").val();if(u("#video-assign-folder")&&(g==1)){u("#video-assign-folder").find('.folder-assign-form select[name=folder_id] option[value="'+b.folder_id+'"]').remove()}}},"text")}});var p=function(b){var a=this;this.$el=b;this.$el.on("submit.folder.goanimate",".folder-edit-form",function(c){var d=u(this);c.preventDefault();a.postEdit(d.serialize())});this.$el.on("click.folder.goanimate",".folder-edit-form .btn-delete-folder.active",function(c){var d=u(this);c.preventDefault();a.postDelete({folder_id:d.attr("data-enc-fid")})});this.$el.on("click.folder.goanimate",".folder-recover-form-container .folder-recover-link",function(c){var d=u(this);c.preventDefault();a.postDeleteReceover(u(".folder-recover-form").serialize())})};p.prototype=u.extend({},x.prototype,{postEdit:function(a){var b=this;b.$el.find(".btn-edit-folder").find("button").children("span").hide().end().find(".msg-loading").show().end().attr("disabled",true);u.post("/ajax/updateMovieFolder",a,function(f){b.$el.find(".btn-edit-folder").find("button").children("span").hide().end().find(".msg-default").show().end().attr("disabled",false);var d=f.substr(0,1);var e=jQuery.parseJSON(f.substr(1));if(1==d){b.alert(e.error,"error")}else{b.$el.find(".btn-edit-folder").find("button").children("span").hide().end().find(".msg-success").show().end().attr("disabled",true);b.$el.find(".modal-footer").addClass("modal-footer-collapse-open");var g=b.$el.find("form input[name=enc_fid]").val();var c=u("<div/>").text(b.$el.find("form input[name=name]").val()).html();u('[data-drag-video-current-folder="'+g+'"] span.video-folder a').html(c);u('a[data-category="folders/'+g+'"] .video-listing-heading-text .folder-name').html(c);u('.video-listing-heading .folder-name[data-folder-id="'+g+'"]').html(c)}},"text")},postDelete:function(a){var b=this;b.$el.find(".btn-delete-folder").find(".icon-default").hide().end().find(".icon-loading").show();u.post("/ajax/deleteMovieFolder",a,function(e){b.$el.find(".btn-delete-folder").find(".icon-loading").hide().end().find(".icon-default").show();var c=e.substr(0,1);var d=jQuery.parseJSON(e.substr(1));if(1==c){b.alert(d.error,"error")}else{b.$el.find(".modal-body").find(".folder-form-container").hide().end().find(".folder-recover-form-container").show();b.$el.find(".modal-footer").addClass("modal-footer-collapse-open");var f=b.$el.find("form input[name=enc_fid]").val();u("#videos-folders-nav").find('li[data-folder-id="'+f+'"]').remove()}},"text")},postDeleteReceover:function(a){var b=this;b.loading();u.post("/ajax/addMovieFolder",a,function(e){b.loading();var c=e.substr(0,1);var d=jQuery.parseJSON(e.substr(1));if(1==c){b.alert(d.error,"error")}else{myVideos.updateFolderList();b.$el.find(".folder-recover-confirm").hide().end().find(".folder-recover-status").show()}},"text")}});var v=function(b){var a=this;this.$el=b;this.$el.on("submit.folder.goanimate",".folder-assign-form",function(c){var d=u(this);c.preventDefault();a.post(d.serialize())});this.$el.on("click.folder.goanimate",".folder-assign-form .btn-create-folder",function(c){var d=u(this),f=x.ensure("folder-create"),e=f.data("folderCreate");if(!e){f.data("folderCreate",e=new o(f))}c.preventDefault();e.load(d.data("remote"))})};v.prototype=u.extend({},x.prototype,{post:function(a){var b=this;b.$el.find(".btn-assign-folder").find("button").children("span").hide().end().find(".msg-loading").show().end().attr("disabled",true);u.post((""==b.$el.find("form input[name=current_folder_id]").val())?"/ajax/addMovieToFolder":"/ajax/moveMovieToFolder",a,function(g){b.$el.find(".btn-assign-folder").find("button").children("span").hide().end().find(".msg-default").show().end().attr("disabled",false);var d=g.substr(0,1);var e=jQuery.parseJSON(g.substr(1));if(1==d){b.alert(e.error,"error")}else{b.$el.find(".btn-assign-folder").find("button").children("span").hide().end().find(".msg-success").show().end().attr("disabled",true);b.$el.find(".modal-footer").addClass("modal-footer-collapse-open");var h=b.$el.find("form input[name=video_id]").val();var c=b.$el.find("form input[name=current_folder_id]").val();var j=parseInt(u("#videos-nav").find('.drop-region[data-folder-id="'+c+'"] .video-count').text())-1;u("#videos-nav").find('.drop-region[data-folder-id="'+c+'"] .video-count').text(j);u(".video-listing-heading .video-count").text(j);var k=b.$el.find("form select[name=folder_id]").val();var f=parseInt(u("#videos-nav").find('.drop-region[data-folder-id="'+k+'"] .video-count').text())+1;u("#videos-nav").find('.drop-region[data-folder-id="'+k+'"] .video-count').text(f);myVideos.list()}},"text")}});u(document).on("click",'[data-action="video-share"]',function(a){var b=u(this),c=x.ensure("video-share"),d=c.data("videoShare");if(!d){c.data("videoShare",d=new t(c))}a.preventDefault();d.load(b.data("remote"))}).on("click",'[data-action="video-edit"]',function(a){var b=u(this),d=x.ensure("video-edit"),c=d.data("videoEdit");if(!c){d.data("videoEdit",c=new y(d))}a.preventDefault();c.load(b.data("remote"))}).on("click",'[data-action="remove-conversion"]',function(a){var b=u(this),d=x.ensure("video-edit"),c=d.data("videoEdit");enc_movie_id=b.data("video");u.post("/ajax/removePendingConversions/"+enc_movie_id,function(e){if(e.error){c.alert(e.error,"error")}else{c.alert("The conversion process has been cancelled. You can now edit your video. Re-start the conversion process to download/export the most recent version of your video.","success alert-icon");d.find("#video_enabled").show();d.find("#video_disabled").hide()}},"json");a.preventDefault()}).on("click",'[data-action="video-export"]',function(b){var c=u(this),d=x.ensure("video-export"),a=d.data("videoExport");if(!a){d.data("videoExport",a=new n(d))}b.preventDefault();a.load(c.data("remote"))}).on("click",'[data-action="video-settings"]',function(b){var c=u(this),d=x.ensure("video-settings"),a=d.data("videoSettings");if(!a){d.data("videoSettings",a=new w(d))}b.preventDefault();a.load(c.data("remote"))}).on("click.video.goanimate",'[data-action="video-delete"]',function(a){a.preventDefault();q.doDelete(u(this).data("video"))}).on("click.video.goanimate",'[data-action="video-restore"]',function(a){a.preventDefault();q.doUnDelete(u(this).data("video"))}).on("click.video.goanimate",'[data-action="video-watermark"]',function(a){a.preventDefault();u.post("/ajax/getUserWatermarks/"+u(this).data("video"),function(b){showOverlay(b)})}).on("click",'[data-action="video-license"]',function(a){var b=u(this),d=x.ensure("video-license"),c=d.data("videoLicense");if(!c){d.data("VideoLicense",c=new s(d))}a.preventDefault();c.load(b.data("remote"))}).on("change",'[name="cbo_country"]',function(a){var b=u(this),d=x.ensure("video-license"),c=d.data("videoLicense");if(!c){d.data("VideoLicense",c=new s(d))}a.preventDefault();c.resetState()}).on("change",'[name="license_type"]',function(a){var b=u(this),d=x.ensure("video-license"),c=d.data("videoLicense");if(!c){d.data("VideoLicense",c=new s(d))}a.preventDefault();c.toggleCompanyInput()}).on("click",'[data-action="folder-create"]',function(a){var b=u(this),d=x.ensure("folder-create"),c=d.data("folderCreate");if(!c){d.data("folderCreate",c=new o(d))}a.preventDefault();c.load(b.data("remote"))}).on("click",'[data-action="folder-edit"]',function(a){var b=u(this),c=x.ensure("folder-edit"),d=c.data("folderEdit");if(!d){c.data("folderEdit",d=new p(c))}a.preventDefault();d.load(b.data("remote"))}).on("click",'[data-action="assign-folder"]',function(a){var b=u(this),d=x.ensure("video-assign-folder"),c=d.data("folderAssign");if(!c){d.data("folderAssign",c=new v(d))}a.preventDefault();c.load(b.data("remote"))})})(jQuery,window);function emailShare(f){var e=$("#email-share");if(e.length==0){e=$('<div class="modal" id="email-share"><div class="modal-header"><button class="close" type="button" data-dismiss="modal" aria-hidden="true">&times;</button><h3></h3></div><div class="modal-body"></div></div>');e.find("h3").text(GT.gettext("Share video to your friends"));e.appendTo("body")}var g="/email_a_friend/share_movie/"+f;var h=$('<iframe id="ab" frameborder="0" scrolling="no"></iframe>');h.attr("src",g).css({width:"640px",height:"370px"});e.find(".modal-body").html(h);e.modal()};