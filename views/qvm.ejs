<html>
<head>
    <% const char1Info = params.qvm.stockCharacters.find(i => i.char1_default == true) %>
    <meta charset="utf-8">
    <title><%= params.qvm.themeName %> Template | <%= params.qvm.title %> | GoNexus</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <% const nonSelectableCharInfo = params.qvm.nonSelectableCharInfo %>
    <meta name="description" content="With GoNexus Quick App you can make your own video with just a few clicks and some typing on your keyboard. It's dead simple and fun!">
    
    <meta name="google-site-verification" content="K_niiTfCVi72gwvxK00O4NjsVybMutMUnc-ZnN6HUuA">
    
    <link href="/qvm_files/buttons.css.gz.css" rel="stylesheet" type="text/css">
    <link href="/static/qvm/templates/<%= params.flashvars.theme %>/theme.css" rel="stylesheet" type="text/css">
    <link href="/qvm_files/school_golite.css.gz.css" rel="stylesheet" type="text/css">
    <link href="/qvm_files/voiceselectionwidget.css.gz.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans:bold|Anton" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]>
    <link href="https://d2qrjeyl4jwu9j.cloudfront.net/static/642cd772aad8e952/go/css/script2cartoon/ie.css.gz.css" rel="stylesheet" type="text/css">
    <![endif]-->
    
    <script type="text/javascript" src="/qvm_files/jquery-1.4.4.min.js.gz.js"></script>
    <script type="text/javascript" src="/qvm_files/jquery.blockUI.js.gz.js"></script>
    <script type="text/javascript" src="/qvm_files/jquery.scrollTo.min.js.gz.js"></script>
    <script type="text/javascript" src="/qvm_files/jquery.jplayer.min.js.gz.js"></script>
    <script type="text/javascript" src="/qvm_files/jquery.tmpl.min.js.gz.js"></script>
    <script type="text/javascript" src="/qvm_files/jquery.swfobject.min.js.gz.js"></script>
    <script type="text/javascript" src="/qvm_files/jquery.waypoints.min.js.gz.js"></script>
    <script type="text/javascript" src="/qvm_files/jquery.placeholder.min.js.gz.js"></script>
    <script src="https://fireanimate-eb62d.firebaseapp.com/__/firebase/6.2.4/firebase-app.js"></script>
    <script src="https://fireanimate-eb62d.firebaseapp.com/__/firebase/6.2.4/firebase-auth.js"></script>
    <script src="https://fireanimate-eb62d.firebaseapp.com/__/firebase/init.js"></script>
    <script src="/js/user.js"></script>
    <script type="text/javascript" src="/qvm_files/lite.js.gz.js"></script>
    <script type="text/javascript" src="/qvm_files/voiceselectionwidget.js.gz.js"></script>
    <script type="text/javascript" src="/qvm_files/Gettext.js.gz.js"></script>
    <script type="text/javascript" src="/static/tommy/2012/go/po/goserver_js-en_US.js"></script>
    <script type="text/javascript">
    var srv_tz_os = -4;
    var view_name = "school";
    var user_cookie_name = "u_info";
    var golite_theme = "<%= params.flashvars.theme %>";
    var publish_setting = 'public';
    
    var I18N_LANG = 'en_US';
    var GT = new Gettext({'locale_data': json_locale_data});
    </script>
    
    </head>
    <body id="school">
    <script type="text/javascript">
    GoLite.settings.player = {
        swf: "/static/animation/player.swf",
        height: 384,
        width: 550
    }
    GoLite.settings.thumbnailChooser = {
        swf: "/static/qvm/thumbnailChooser.swf",
        height: 170,
        width: 295
    }
    
    VoiceRecorder.defaultSettings.swf = "/static/qvm/MyMicRecorder.swf";
    jQuery.extend(VoiceRecorder.defaultSettings.flashvars, {
        apiserver: "/qvm_micRecord_",
        clientThemePath: "/static/tommy/2012/<client_theme>",
        isTemplate: true
    });
    
    // scroll to target step
    function stepTo(step) {
        var settings = {
            duration: 1500,
            offset: {
                top: 10
            }
        };
        // auto focus dialog input
        if (step == '#step3') {
            settings.onAfter = function() { jQuery('#dialogs .focus .dialog_input').focus(); };
        }
        jQuery.scrollTo(step, settings);
    }
    
    </script>
    <div id="bg"></div>
    <div id="container">
    <div id="nav_links" style="display: block;">
        <div class="inside">
            <ul>
                <li class="home" title="Back to Home">
                    <a href="/create" onclick="return confirm('You will lose your work if you leave this page. Are you sure?');">Home</a>
                </li>
                <li class="seperate">&nbsp;</li>
                <li class="intro on"><a onclick="stepTo('#intro')">0</a></li>
                <li class="step1"><a onclick="stepTo('#step1');">1</a></li>
                <li class="step2"><a onclick="stepTo('#step2');">2</a></li>
                <li class="step3"><a onclick="stepTo('#step3');">3</a></li>
                <li class="step4"><a onclick="GoLite.preview();stepTo('#step4');">4</a></li>
                <li class="seperate">&nbsp;</li>
                <li class="next" title="Next step"><a>Next</a></li>
                <li class="prev" title="Previous step"><a>Previous</a></li>
            </ul>
            <div class="clear"></div>
        </div>
    </div>
    <div id="login_bar" style="display:none">
        <div class="inside">
            You'll need to signup to save your video.  Do it now.		
            <div class="options">
                <a href="javascript:jQuery.blockUI()" onclick="updateUserState(response => {
                    jQuery.unblockUI();
                    setTimeout(() => {
                        if (userData) jQuery('#login_bar').slideUp()
                        showNotice(response)
                    }, 500);
                });">Confirm Account</a> -
                <a id="login_link" href="#">Login</a> -
                <a id="signup_link" href="#">Sign up</a>
            </div>
        </div>
    </div>
    <script>
    jQuery('#login_link').click(function(e) {
        e.preventDefault();
        showOverlay(jQuery('#login'));
        jQuery('#login_email').focus();
    });
    jQuery('#signup_link').click(function(e) {
        e.preventDefault();
        showOverlay(jQuery('#signup'), {top: '80px'});
        jQuery('#email').focus();
    });
    </script>
    <div id="intro" class="section">
        <div class="inside">
            <h1 class="hide"><%= params.qvm.title %></h1>
            <p><%= params.qvm.intro %></p>
            <p><%- params.qvm.intro_steps %></p>
        </div>
    
        <a class="btn_next" href="#step1" onclick="stepTo('#step1'); return false;">Next</a>
    </div>
    
    <div id="seperator0"></div>
    
    <div id="step1" class="section">
        <h2>1. Choose a Setting</h2>
    
        <a class="previous_step" href="#intro" onclick="stepTo('#intro'); return false;">Back</a>
    
        <div class="inside">
            <div id="template_name"></div>
            <div id="template_desc"></div>
            <div id="templates" class="item_selector">
                <% if (params.qvm.templates.length > 1) { %>
                    <a class="select_button prev" href="#">&lt;</a>
                <% } %>
                <div class="items">
                    <% for (const templateInfo of params.qvm.templates) { %>
                        <div 
                            class="<%= templateInfo.class %>" 
                            data-tid="<%= templateInfo.tid %>" 
                            data-thumb="<%= templateInfo.thumb %>" 
                            title="<%= templateInfo.title %>" 
                            data-desc="<%= templateInfo.desc %>" 
                            data-char-thumb-a="<%= templateInfo['char-thumb-a'] %>" 
                            data-char-thumb-b="<%= templateInfo['char-thumb-b'] %>"
                        >
                            <img src="<%= templateInfo.background %>">
                        </div>
                    <% } %>
                </div>
                <% if (params.qvm.templates.length > 1) { %>
                    <a class="select_button next" href="#">&gt;</a>
                <% } %>
            </div>
        </div>
    
        <a class="btn_next" href="#step2" onclick="stepTo('#step2'); return false;">Next</a>
        <div class="upgrade" style="display: none;">
            <a href="javascript:popAccountModal();" class="buttonbase buttonblue dark" style="margin:0 auto;float:none;display:block;">
    <div class="buttontitle">Get A GoNexus Account</div>
    </a>
        </div>
    </div>
    
    <div id="seperator1"></div>
    
    <div id="step2" class="section">
        <h2>2. Select Your Actors</h2>
    
        <a class="previous_step" href="#step1" onclick="stepTo('#step1'); return false;">Back</a>
    
        <div class="inside">
            <div class="character">
                <% if (char1Info)  { %>
                    <div id="character1_title" class="title">
                        <img src="<%= params.qvm.templates.find(i => i.class == 'item selected')['char-thumb-a'] %>" alt="">
                    </div>
                <% } %>
                <div id="character1" class="item_selector character_selector">
                    <% if (char1Info) { %>
                        <a class="select_button prev" href="#">&lt;</a>
                    <% } %>
                    <div class="items">
                        <% if (char1Info) for (const charInfo of params.qvm.stockCharacters) { %>
                            <% if (charInfo.char1_default) { %>
                                <div 
                                    class="item selected" 
                                    data-cid="<%= charInfo.cid %>"
                                    data-name="<%= charInfo.name %>" 
                                    data-gender="<%= charInfo.gender %>" 
                                    data-thumb="<%= charInfo.head %>"
                                    style="display: block;"
                                >
                                    <span>
                                        <img src="<%= charInfo.thumb %>" alt="">
                                    </span>
                                </div>
                            <% } else { %>
                                <div 
                                    class="item" 
                                    data-cid="<%= charInfo.cid %>"
                                    data-name="<%= charInfo.name %>" 
                                    data-gender="<%= charInfo.gender %>" 
                                    data-thumb="<%= charInfo.head %>"
                                    style="display: none;"
                                >
                                    <span>
                                        <img src="<%= charInfo.thumb %>" alt="">
                                    </span>
                                </div>
                            <% } %>
                        <% } else { %>
                            <div 
                                class="item selected" 
                                data-cid="<%= nonSelectableCharInfo.cid %>"
                                data-name="<%= nonSelectableCharInfo.name %>" 
                                data-gender="<%= nonSelectableCharInfo.gender %>" 
                                data-thumb="<%= nonSelectableCharInfo.head %>"
                                style="display: none;"
                            >
                                <span>
                                    <img src="<%= nonSelectableCharInfo.thumb %>" alt="">
                                </span>
                            </div>
                        <% } %>
                    </div>
                    <% if (char1Info) { %>
                        <a class="select_button next" href="#">&gt;</a>
                    <% } %>
                </div>
            <% if (char1Info) { %>
                <div class="name"></div>
                <% if (params.qvm.customChars_info) { %>
                    <div class="customlink">
                        <a class="isplus" href="javascript:GoLite.showSelectCCOverlay(0)">Use your own character</a>
                        <a class="isbasic" href="javascript:popAccountModal()">Use your own character (Account Required)</a>
                    </div>
                <% } %>
            <% } %>
            </div>
    
            <div class="character">
                <% if (char1Info) { %>
                    <div id="character2_title" class="title">
                        <img src="<%= params.qvm.templates.find(i => i.class == 'item selected')['char-thumb-b'] %>" alt="">
                    </div>
                <% } %>
                <div id="character2" class="item_selector character_selector">
                    <a class="select_button prev" href="#">&lt;</a>
                    <div class="items">
                        <% for (const charInfo of params.qvm.stockCharacters) { %>
                            <% if (charInfo.char2_default) { %>
                                <div 
                                    class="item selected" 
                                    data-cid="<%= charInfo.cid %>"
                                    data-name="<%= charInfo.name %>" 
                                    data-gender="<%= charInfo.gender %>" 
                                    data-thumb="<%= charInfo.head %>"
                                    style="display: block;"
                                >
                                    <span>
                                        <img src="<%= charInfo.thumb %>" alt="">
                                    </span>
                                </div>
                            <% } else { %>
                                <div 
                                    class="item" 
                                    data-cid="<%= charInfo.cid %>"
                                    data-name="<%= charInfo.name %>" 
                                    data-gender="<%= charInfo.gender %>" 
                                    data-thumb="<%= charInfo.head %>"
                                    style="display: none;"
                                >
                                    <span>
                                        <img src="<%= charInfo.thumb %>" alt="">
                                    </span>
                                </div>
                            <% } %>
                        <% } %>
                    </div>
                    <a class="select_button next" href="#">&gt;</a>
                </div>
                <div class="name"></div>
                <% if (params.qvm.customChars_info) { %>
                    <div class="customlink">
                        <a class="isplus" href="javascript:GoLite.showSelectCCOverlay(1)">Use your own character</a>
                        <a class="isbasic" href="javascript:popAccountModal()">Use your own character (Account Required)</a>
                    </div>
                <% } %>
            </div>
        </div>
    
        <div class="snippets" style="display: none">
            <strong class="plus-char-txt">GoPlus Character</strong>
            <div class="plus-cover"><div><strong>GoPlus Template</strong> Upgrade to GoPlus to go to the next step.</div></div>
            <div class="item" data-cid="" data-name="" data-voice="amy" data-thumb=""><span><img alt=""></span></div>
            <div class="selectccoverlay lightbox" style="display:none">
        <div class="lightbox_wrapper">
            <h2>1. Select your character:</h2>
    
    <style type="text/css">
    .selectccoverlay h2 { margin-left: 66px; margin-bottom: 0em; font-size: 18px; }
    .selectccoverlay .ccbrowsercontainer { width: 545px; height: 210px; padding: 5px 0px; margin-left: 33px; }
    .selectccoverlay .voiceselectorwidget { margin-left: 92px; }
    .selectccoverlay .ccbrowsercontainer .leftarrow, .rightarrow { position: relative; margin-left: auto; margin-right: auto; top: 72px; width: 11px; height: 28px; }
    .selectccoverlay .ccbrowsercontainer .leftarrow { background: url('/ui/img/btn_arrow_l.png') no-repeat 0px 0px; cursor: pointer; }
    .selectccoverlay .ccbrowsercontainer .disabled .leftarrow { background: none; cursor: default; }
    .selectccoverlay .ccbrowsercontainer .disabled .leftarrow:hover { background: none; cursor: default; }
    .selectccoverlay .ccbrowsercontainer .leftarrow:hover { background: url('/ui/img/btn_arrow_l.png') no-repeat 0px -28px; }
    .selectccoverlay .ccbrowsercontainer .rightarrow { background: url('/ui/img/btn_arrow_r.png') no-repeat 0px 0px; cursor: pointer; }
    .selectccoverlay .ccbrowsercontainer .disabled .rightarrow { background: none; cursor: default; }
    .selectccoverlay .ccbrowsercontainer .disabled .rightarrow:hover { background: none; cursor: default; }
    .selectccoverlay .ccbrowsercontainer .rightarrow:hover { background: url('/ui/img/btn_arrow_r.png') no-repeat 0px -28px; }
    .selectccoverlay .ccbrowsercontainer .leftarrowcontainer { float: left; height: 175px; width: 25px; margin-right: 10px; }
    .selectccoverlay .ccbrowsercontainer .rightarrowcontainer { float: right; height: 175px; width: 25px; margin-left: 5px; }
    .selectccoverlay .ccbrowsercontainer .selectedcc { border-width: 3px; border-style: solid; border-color: #999999 !important; }
    .selectccoverlay .ccbrowsercontainer .cc { overflow: hidden; position: relative; border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px; background-color: #dddddd; width: 85px; height: 85px; float: left; margin-right: 5px; margin-bottom: 5px; border-width: 3px; border-color: #dddddd; border-style: solid; }
    .selectccoverlay .ccbrowsercontainer .cc.enabled { cursor: pointer; }
    .selectccoverlay .ccbrowsercontainer .cc.enabled:hover { background-color: #eeeeee; border-color: #eeeeee; }
    .selectccoverlay .ccbrowsercontainer .cc img { position: absolute; }
    .selectccoverlay .pagenumdisplay { text-align: center; margin-bottom: 1em; clear: both; font-size: 14px; font-weight: bold; color: #aaaaaa; }
    .selectccoverlay a.bottomcancel { float: left; text-align: center; margin: 30px auto; display: block; color: #666666; font-size: 16px; font-weight: bold; text-decoration: none; }
    .selectccoverlay a.bottomcancel:hover { color: #777777; text-decoration: none; }
    </style>
    
            <div class="ccbrowsercontainer">
                <div class="leftarrowcontainer"><div class="leftarrow"></div></div>
                <div class="rightarrowcontainer"><div class="rightarrow"></div></div>
                <div class="cc"></div>
                <div class="cc"></div>
                <div class="cc"></div>
                <div class="cc"></div>
                <div class="cc"></div>
                <div class="cc"></div>
                <div class="cc"></div>
                <div class="cc"></div>
                <div class="cc"></div>
                <div class="cc"></div>
                <div class="pagenumdisplay"></div>
            </div>
    
            <h2>2. Select a voice for your character:</h2>
    <div class="voiceselectorwidget">
        <div class="voiceselector">
        </div>
        <!-- Templates -->
        <div class="templates" style="display: none">
            <!-- Voice list -->
            <div class="categorytab">
                <div class="flag" title="Language"></div>
                <div class="masteroptionscontainer">
                    <div class="optionscontainer">
                    </div>
                </div>
            </div>
            <!-- Voice option -->
            <div class="option">
                <div class="cflag"></div>
                <div class="sex"></div>
                <span class="desc"></span>
                                <span class="plus"> (Premium account only)</span>
                            <div class="playercontrol">
                    <div class="button play"></div>
                </div>
            </div>
        </div>
        <div class="jplayer"></div>
    </div>
            <div style="overflow: auto; padding-left: 135px;">
                <a href="javascript:;" class="buttonbase buttonorange" id="voiceselect_confirm" style="margin:15px auto;float:left;display:block;">
    <div class="buttontitle">Confirm</div>
    </a>
                <a href="javascript:;" class="buttonbase buttonblue dark" id="voiceselect_plusupgrade" style="margin:15px auto;float:left;display:none;">
    <div class="buttontitle">Upgrade Now</div>
    </a>
                <a href="#" onclick="jQuery.unblockUI();return false;" class="bottomcancel"><div style="width: 180px">Cancel</div></a>
            </div>
            <a onclick="jQuery.unblockUI()" class="close_btn">×</a>
        </div>
    </div>
            <div class="selectvoiceoverlay lightbox" style="display:none">
        <div class="lightbox_wrapper">
    
    <style type="text/css">
    .selectvoiceoverlay { width: 550px; }
    .selectvoiceoverlay h2 { text-align: center; color: black; margin-bottom: 0px; font-size: 18px; line-height: 20px; }
    .selectvoiceoverlay h3 { text-align: center; color: #999999; font-style: oblique; margin-top: 0px; margin-bottom: 2em; font-weight: normal; font-size: 13px; line-height: 20px; }
    .selectvoiceoverlay .voiceselectorwidget { margin-left: auto; margin-right: auto; }
    .selectvoiceoverlay a.bottomcancel { float: left; text-align: center; margin: 30px auto; display: block; color: #666666; font-size: 16px; font-weight: bold; text-decoration: none; }
    .selectvoiceoverlay a.bottomcancel:hover { color: #777777; text-decoration: none; }
    </style>
    
            <h2>Select a voice for your character</h2>
            <h3>This change applies to the whole video</h3>
            <script type="text/javascript">
    </script>
    <div class="voiceselectorwidget">
        <div class="voiceselector">
        </div>
        <!-- Templates -->
        <div class="templates" style="display: none">
            <!-- Voice list -->
            <div class="categorytab">
                <div class="flag" title="Language"></div>
                <div class="masteroptionscontainer">
                    <div class="optionscontainer">
                    </div>
                </div>
            </div>
            <!-- Voice option -->
            <div class="option">
                <div class="cflag"></div>
                <div class="sex"></div>
                <span class="desc"></span>
                                <span class="plus"> (Premium account only)</span>
                            <div class="playercontrol">
                    <div class="button play"></div>
                </div>
            </div>
        </div>
        <div class="jplayer"></div>
    </div>
            <div style="overflow: auto; padding-left: 85px;">
                <a href="javascript:;" class="buttonbase buttonorange" id="voiceselectonly_confirm" style="margin:15px auto;float:left;display:block;">
    <div class="buttontitle">Confirm</div>
    </a>
                                <a href="/public_features" class="buttonbase buttonpurple3 dark" id="voiceselectonly_plusupgrade" style="margin:15px auto;float:left;display:none;">
    <div class="buttontitle">Get a quote</div>
    </a>
                            <a href="#" onclick="jQuery.unblockUI();return false;" class="bottomcancel"><div style="width: 180px">Cancel</div></a>
            </div>
            <a onclick="jQuery.unblockUI()" class="close_btn">×</a>
        </div>
    </div>
        </div>
    
    <script id="dialogTmpl" type="text/x-jquery-tmpl">
        <div class="dialog">
            <div class="num"></div>
            <div class="char_thumb">
                <img src="${thumbURL}" alt="" />
                <a class="switch">Switch</a>
                <div class="tips">Switch Actor</div>
            </div>
            <div class="box">
                <div class="dialog_input_wrapper">
                    <textarea class="dialog_input" name="script_text[]"></textarea>
                    <span class="label">Type in or Record Your dialog</span>
                </div>
                <div class="counter" style="display:none;"></div>
                <div class="voice_recorder"></div>
                <div class="dialog_options">
                    <a class="dialog_switch">Actor<span class="tips">Switch Actor</span></a>
                    {{if hasFacial}}
                    <% if (!params.qvm.disableFeatures.emotions) { %>
                        <a class="dialog_facial">Emotion<span class="tips">Switch Emotion</span></a>
                    <% } %>
                    {{/if}}
                    <div class="langarea">
                        <div class="lang"></div>
                        <div class="gender"></div>
                        Voice                    <div class="tips">Switch Voice</div>
                    </div>
                </div>
                <div class="dialog_input_control">
                    <a class="dialog_tts on" data-method="tts"><div class="icon"></div><span class="tips">Text to Speech</span></a>
                    <a class="dialog_mic" data-method="mic"><div class="icon"></div><span class="tips">Voice Recording</span></a>
                </div>
                <div class="dialog_control">
                    <a title="Delete" class="dialog_delete">Delete</a>
                    <a title="Insert Line" class="dialog_insert">Insert Line</a>
                </div>
            </div>
        </div>
    </script>
    
        <a class="btn_next" href="#step3" onclick="stepTo('#step3'); return false;">Next</a>
        <div class="upgrade" style="display: none;">
            <a href="javascript:popUpgrade();" class="buttonbase buttonblue dark" style="margin:0 auto;float:none;display:block;">
    <div class="buttontitle">Upgrade Now</div>
    </a>
        </div>
    </div>
    
    <div id="seperator2"></div>
    
    <div id="step3" class="section">
        <h2><span>3. Type in or Record Your dialog</span></h2>
    
        <a class="previous_step" href="#step2" onclick="stepTo('#step2'); return false;">Back</a>
    
        <div id="dialog_wrapper">
        <div id="dialogs">
            <div class="dialog focus" data-charid="0" data-facial="default">
                <div class="num">1</div>
                <div class="char_thumb">
                    <img src="<%= char1Info ? char1Info.head : params.qvm.nonSelectableCharInfo.head %>" alt="">
                    <a class="switch">Switch</a>
                    <div class="tips">Switch Actor</div>
                </div>
                <div class="box">
                    <div class="dialog_input_wrapper">
                        <textarea class="dialog_input" name="script_text[]"></textarea>
                        <span class="label" style="opacity: 1;">Type in or Record Your dialog</span>
                    </div>
                    <div class="counter" style="display: none;">180 characters remaining</div>
                    <div class="voice_recorder"></div>
                    <div class="dialog_options">
                        <a class="dialog_switch">Actor<span class="tips">Switch Actor</span></a>
                        <% if (!params.qvm.disableFeatures.emotions) { %>
                            <a class="dialog_facial">Emotion<span class="tips">Switch Emotion</span></a>
                        <% } %>
                        <div class="langarea">
                            <div class="lang US"></div>
                            <div class="gender M"></div>
                            Voice                        <div class="tips">Switch Voice</div>
                        </div>
                    </div>
                    <div class="dialog_input_control">
                        <a class="dialog_tts on" data-method="tts"><div class="icon"></div><span class="tips">Text to Speech</span></a>
                        <a class="dialog_mic" data-method="mic"><div class="icon"></div><span class="tips">Voice Recording</span></a>
                    </div>
                    <div class="dialog_control">
                        <a title="Delete" class="dialog_delete">Delete</a>
                        <a title="Insert Line" class="dialog_insert">Insert Line</a>
                    </div>
                </div>
            </div>
            <div class="dialog fake" data-charid="1">
                <div class="char_thumb">
                    <img src="<%= params.qvm.stockCharacters.find(i => i.char2_default == true)?.head %>" alt="">
                </div>
                <div class="box">
                    <div class="dialog_input_wrapper">
                        <div class="langarea">
                        </div>
                        <textarea id="fake_dialog_input" class="dialog_input" name="script_text[]"></textarea>
                    </div>
                    <label for="fake_dialog_input" class="dialog_input_message">
                        <span class="basic">
                            Because you don't have a GoNexus account, you will be limited to adding 10 dialog lines.
                            <br>Please signup to add up to 30 dialog lines.
                        </span>
                        <span class="plus">Add up to 30 dialog lines</span>
                    </label>
                </div>
            </div>
        </div>
        </div>
    
        <div class="footer">
            <div class="bottom"></div>
            <a class="btn_next" onclick="GoLite.preview();stepTo('#step4');">Preview</a>
    
            <div class="upgrade" style="display: none;">
                <a href="javascript:popUpgrade();" class="buttonbase buttonblue dark" style="margin:0 auto;float:none;display:block;">
    <div class="buttontitle">Upgrade Now</div>
    </a>
            </div>
        </div>
    
        <div id="facial_expression" class="lightbox" style="display:none">
            <div class="lightbox_wrapper">
                <h2>Choose a facial expression:</h2>
                <div id="expression">
                    Expressions:
                    <ul id="expression_list">
                        <li><a data-facial="default" class="default selected">Default</a></li>
                        <li><a data-facial="happy" class="happy">Happy</a></li>
                        <li><a data-facial="angry" class="angry">Angry</a></li>
                        <li><a data-facial="sad" class="sad">Sad</a></li>
                        <li><a data-facial="cry" class="cry">Cry</a></li>
                    </ul>
                </div>
    
                <a id="facial_expression_submit" href="javascript:;">Confirm</a>
                <a onclick="jQuery.unblockUI();" class="close_btn">×</a>
            </div>
        </div>
    
    <script type="text/javascript">
    facialExpression.init({
    "default" : "Default",
    "happy": "Happy",
    "angry": "Angry",
    "sad": "Sad",
    "cry": "Cry"
    });
    </script>
    
        <div id="dialog_input_change_confirm" class="lightbox confirmbox" style="display:none">
            <div class="lightbox_wrapper">
                <p>Switch Voice Input</p>
                <p>The current line of dialog will reset if you switch to a different voice input.</p>
                <div class="confirm_buttons">
                    <a class="action-btn alert" onclick="jQuery.unblockUI();">Proceed</a>
                    <a class="action-btn disabled" onclick="jQuery.unblockUI();">Cancel</a>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
    jQuery('#dialogs .dialog').scriptDialog();
    </script>
    
    <div id="seperator3"></div>
    
    <div id="step4" class="section">
        <h2>4. Preview Your Video</h2>
    
        <a class="previous_step" href="#step3" onclick="stepTo('#step3'); return false;">Back</a>
    
        <div class="inside">
            <div class="upgrade" style="display:none">
                <h3>Upgrade to GoPlus to enable preview and save your video.</h3>
    
                <a href="javascript:popUpgrade();" class="buttonbase buttonblue dark" id="btn_upgrade" style="margin:15px auto;float:none;display:block;">
    <div class="buttontitle">Upgrade Now</div>
    </a>
            </div>
            <div class="generate">
                <a class="btn_preview" href="#" onclick="GoLite.preview(); return false;">Generate Preview</a>
                <p>You made all the changes you wanted to your video?<br>
                Let's see how it looks like then!</p>
            </div>
            <div class="loading"></div>
            <div class="preview" style="display:none">
                <div id="player_container">
                    You can't use GoNexus because Flash might be disabled. <a href="https://get.adobe.com/flashplayer/">Enable Flash</a>.
                </div>
                <a id="btn_save" href="#" onclick="jQuery(document).trigger('GoLite.stateChange', ['save']); return false;">Save Now</a>
            </div>
    
            <div class="save" style="display:none">
                <div class="thumbnail">
                    Choose your thumbnail
                    <div id="thumb_chooser_container">
                        You can't use GoNexus because Flash might be disabled. <a href="https://get.adobe.com/flashplayer/">Enable Flash</a>.
                    </div>
                </div>
    
                <div class="title">
                    <label for="movie_title">TITLE:</label>
                    <input type="text" id="movie_title" name="movie_title" value="" maxlength="140" placeholder="Enter your title here">
                </div>
    
                <div class="description">
                    <label for="movie_description">DESCRIPTION:</label>
                    <textarea id="movie_description" name="movie_description" placeholder="Enter your description (optional)"></textarea>
                </div>
    
    
                <div class="clear"></div>
                <div class="group_message" style="color:#999999;font-size:19px;padding-top:10px;text-align:center;">
                    When you are finished with your video, you can post it to a group from the video page.
                </div>
                <div class="buttons">
                    <a id="btn_publish" href="#" style="font-size:21px;" onclick="GoLite.save(); return false;">Save and Go To Video Page</a>
                </div>
                <div class="clear"></div>
    
                <a id="back_preview" href="#" onclick="jQuery(document).trigger('GoLite.stateChange', ['preview']); return false;">
                    &lt; Back to Preview
                </a>
            </div>
        </div>
    </div>
    
    <script type="text/javascript">
        const customCharInfo = Object.fromEntries(GoLite.params('<%= params.customCharInfo %>'));
        var customCC_model = [];
        var reloadCCList = function() {
            jQuery.ajax({
                url: '/api/assets/get/theme/ugc',
                type: 'POST',
                data: Object.assign({
                    type: "char",
                    userId: userData.uid || userData.id
                }, customCharInfo),
                dataType: 'json',
                success: function(data, dummy1, dummy2) {
                    customCC_model = jQuery.grep(data, function(cc) { return (cc.head_url && cc.thumb_url); });
                    jQuery('div.character .customlink').addClass('ready');
                }
            });
        };
        GoLite.checkLogin(1, '<%= params.qvm.urlPostVideoPreview %>');
    </script>
    
    <div id="footer">
        <%- params.qvm.creator_html %>
    </div>
    
    </div>
    
    <div id="publishing" class="lightbox" style="display:none">
        <div class="lightbox_wrapper">Publishing ...</div>
    </div>
    
    <div id="login" class="lightbox" style="display:none">
        <div class="lightbox_wrapper">
            <h2>Login to GoNexus</h2>
            <form id="login_form" action="" method="post">
                <div id="login_form_message"></div>
                <div>
                    <label>Email</label>
                    <input id="login_email" type="text" name="email" value="">
                </div>
                <div>
                    <label>Password</label>
                    <input id="login_password" type="password" name="password" value="">
                </div>
                <div>
                    <a href="javascript:;" class="buttonbase buttonblue" id="login_submit" style="margin:15px auto;float:none;display:block;">
    <div class="buttontitle">Login</div>
    </a>
                </div>
            </form>
            <a onclick="jQuery('#login_form_message').html('');jQuery('#login_email, #login_password').removeClass('error');jQuery.unblockUI();" class="close_btn">&#215;</a>
        </div>
    </div>
    <script>
    (function($) {
    var processing = false;
    
    function validateLogin() {
        var email = $('#login_email'), email_val = $.trim(email.val())
        ,password = $('#login_password[type="password"]');
    
        // remove error class from input
        $('#login_email, #login_password').removeClass('error');
        // Empty form error message
        formErrorMessage('Please Wait...');
    
        if (!email_val || email_val == email.attr('placeholder')) {
            email.addClass('error').focus();
            formErrorMessage(GT.gettext('Please enter your Email'));
            return false;
        }
    
        if (!password.val()) {
            $('#login_password').focus();
            password.addClass('error');
            formErrorMessage('Your password is incorrect. Is your caps lock on?');
            return false;
        }
    
        return true;
    }
    
    function formErrorMessage(message) {
        $('#login_form_message').html(message);
    }
    
    function submitLogin() {
        if (!validateLogin()) { return; }
        if (processing) { return; }
    
        processing = true;
    
        GoLite.userLogin($('#login_form').serialize(), function(error) {
            processing = false;
            console.log(error);
            if (!error.message) $(document).trigger('user.hasAccount');
            else formErrorMessage(error.message);
        });
    }
    
    $(document).ready(function() {
        $('#login_submit').click(function(e) {
            e.preventDefault();
            submitLogin();
        });
    });
    })(jQuery);
    </script>
    
    <div id="signup" class="lightbox" style="display:none">
        <div class="lightbox_wrapper">
        <h2>Create an account</h2>
        <form id="signup_form" action="" method="post">
            <div id="signup_form_message"></div>
            <div>
                <input type="text" id="signup_email" name="email" value="" placeholder="Your Email Address">
            </div>
            <div>
                <input type="text" id="signup_username" name="username" value="" placeholder="Your Display Name">
            </div>
            <div>
                <input type="password" id="signup_password1" name="password1" value="" placeholder="Your Password">
            </div>
            <div>
                <input type="password" id="signup_password2" name="password2" value="" placeholder="Confirm Password">
            </div>
            <div>
            <a href="javascript:;" class="buttonbase buttonblue" id="signup_submit" style="margin:15px auto;float:none;display:block;">
                <div class="buttontitle">Sign Up Now</div>
            </a>
        </form>
        <a onclick="jQuery.unblockUI();" class="close_btn">&#215;</a>
        </div>
    </div>
    <script>
        (function($) {
        var processing = false;
        
        function validateSignup() {
            var email = $('#signup_email'), email_val = $.trim(email.val());
            const pass1 = $('#signup_password1[type="password"]');
            const pass2 = $('#signup_password2[type="password"]')
            var passwordMatches = pass1.val() == pass2.val();
            var displayName = $('#signup_username');

        
            
            formErrorMessage('Please Wait...');
        
            if (!email_val || email_val == email.attr('placeholder')) {
                formErrorMessage(GT.gettext('Please enter your Email'));
                return false;
            }

            if (!displayName.val()) {
                formErrorMessage(GT.gettext('Please enter your Display Name'));
                return false;
            }

            if (!pass1.val()) {
                formErrorMessage(GT.gettext('Please enter a Password'));
                return false;
            }

            if (!pass2.val()) {
                formErrorMessage(GT.gettext('Please enter a Confirm Password'));
                return false;
            }
        
            if (!passwordMatches) {
                formErrorMessage('Both passwords don\'t match');
                return false;
            }
        
            return true;
        }
        
        function formErrorMessage(message) {
            $('#signup_form_message').html(message);
        }
        
        function submitSignup() {
            if (!validateSignup()) { return; }
            if (processing) { return; }
        
            processing = true;
        
            GoLite.userSignup($('#signup_form').serialize(), function(error) {
                processing = false;
                if (!error.message) $(document).trigger('user.hasAccount');
                else formErrorMessage(error.message);
            });
        }
        
        $(document).ready(function() {
            $('#signup_submit').click(function(e) {
                e.preventDefault();
                submitSignup();
            });
        });
        })(jQuery);
    </script>
    <div id="upgrade" class="lightbox" style="display:none">
        <div class="lightbox_wrapper">
			<h3>Make animated videos exactly the way you want!</h3>
            <p>You need a GoNexus Account in order to use all of the features in the Quick Video Maker.</p>
            <small id="account_message"></small>
            <a href="javascript:;" class="buttonbase buttonorange" id="account_confirm" style="margin:15px auto;float:none;display:block;">
                <div class="buttontitle">Confirm Account</div>
            </a>
			<a href="javascript:;" class="buttonbase buttonred dark" id="btn_signup" style="width:220px;margin:15px auto;float:none;display:block;">
                <div class="buttontitle">Signup Now</div>
            </a>
			<a href="javascript:;" class="buttonbase buttonpurple2 dark" id="bth_login" style="width:220px;margin:15px auto;float:none;display:block;">
                <div class="buttontitle">Login</div>
            </a>
		</div>
        <a class="close_btn" onclick="jQuery.unblockUI()">&#215;</a>
        <script>
        jQuery('#bth_login').click(function(e) {
            e.preventDefault();
            showOverlay(jQuery('#login'));
            jQuery('#login_email').focus();
        });
        jQuery('#btn_signup').click(function(e) {
            e.preventDefault();
            showOverlay(jQuery('#signup'), {top: '80px'});
            jQuery('#email').focus();
        });
        </script>
    </div>
    <script type="text/javascript">
    function updateUserState(callback) {
        GoLite.updateUserState(function(userState) {
            if (userState == 2) {
                reloadCCList();
                callback("You are currently logged in to GoNexus.");
            } else callback("You are currently not logged in to GoNexus.");
        });
    }
    jQuery('#account_confirm').click(function(e) {
        e.preventDefault();
        jQuery("#account_message").text("Please Wait...");
        updateUserState(i => jQuery("#account_message").text(i));
    });
    </script>
    <script type="text/javascript">
    jQuery.flash.expressInstall = "/static/libs/expressInstall.swf";
    
    (function($) {
    $(document).ready(function() {
    
        var next = 'step1', prev = '';
    
        $('#nav_links .next').click(function(e) {
            e.preventDefault();
    
            next && stepTo('#' + next);
        });
        $('#nav_links .prev').click(function(e) {
            e.preventDefault();
    
            prev && stepTo('#' + prev);
        });
    
        $('.section').waypoint({offset: '50%'});
    
        $('body').delegate('.section', 'waypoint.reached', function(e, direction) {
            var $this = $(this);
            var id = $this.attr('id');
    
            if (direction == 'up') {
                if (id == 'step1') {
                    next = 'step1';
                    prev = '';
                    id = 'intro';
                } else if (id == 'step2') {
                    next = 'step2';
                    prev = 'intro';
                    id = 'step1';
                } else if (id == 'step3') {
                    next = 'step3';
                    prev = 'step1';
                    id = 'step2';
                } else if (id == 'step4') {
                    next = 'step4';
                    prev = 'step2';
                    id = 'step3';
                }
            } else {
                if (id == 'step1') {
                    next = 'step2';
                    prev = 'intro';
                } else if (id == 'step2') {
                    next = 'step3';
                    prev = 'step1';
                } else if (id == 'step3') {
                    next = 'step4';
                    prev = 'step2';
                } else if (id == 'step4') {
                    next = '';
                    prev = 'step3';
                }
            }
    
            $('#nav_links').find('li').removeClass('on').end().find('.' + id).addClass('on');
        });
    
        jQuery('#movie_title, #movie_description').placeholder();
    });
    $(window).load(function() {
        $('#nav_links').fadeIn();
    });
    })(jQuery);
    </script>
    
    <script type="text/javascript">
        var customCCHeadsBaseUrl = window.location.origin + '/char_heads/';
        var customCCThumbsBaseUrl = window.location.origin + '/char_thumbs/';

    </script>
    
    
    
</body></html>